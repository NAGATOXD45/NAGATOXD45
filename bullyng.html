<!DOCTYPE html>
<html>
<head>
  
  <link rel="stylesheet" type="text/css" href="CSS/preloader.css">
  <link rel="stylesheet" href="CSS/style.css">
  <meta charset="utf-8">
  <title>CSMC VIRGENS ASUNTA</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>
  
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
   <div class="container-fluid">
     <a class="navbar-brand" href="#">CSMC VIRGEN ASUNTA</a>
     <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
       <span class="navbar-toggler-icon"></span>
     </button>
     <div class="collapse navbar-collapse" id="navbarNavDropdown">
       <ul class="navbar-nav">
         <li class="nav-item">
          <li class="nav-item dropdown">
           <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
             DEFINITIVOS
           </a>
           <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdownMenuLink">
             <li><a class="dropdown-item" href="violencia.html">VIOLENCIA</a></li>
             <li><a class="dropdown-item" href="violencia_sexual.html">VIOLENCIA-SEXUAL</a></li>
             <li><a class="dropdown-item" href="espectro_autista.html">ESPECTRO-AUTISTA</a></li>
             <li><a class="dropdown-item" href="comportamiento_0_17.html">COMPORTAMIENTO 0-17</a></li>
             <li><a class="dropdown-item" href="depresion.html">DEPRESION</a></li>
             <li><a class="dropdown-item" href="ansiedad.html">ANSIEDAD</a></li>
             <li><a class="dropdown-item" href="suicida.html">SUICIDA</a></li>
             <li><a class="dropdown-item" href="alcohol.hthml">ALCOHOL</a></li>
             <li><a class="dropdown-item" href="dependencia_alcohol.html">DEPENDENCIA-ALCOHOL</a></li>
             <li><a class="dropdown-item" href="psicoticos.html">PSICOTICOS</a></li>
             <li><a class="dropdown-item" href="p_episodio_psicotico.html">P-EPISODIO-PSICOTICO</a></li>
             <li><a class="dropdown-item" href="t_mental_grave.html">T-MENTAL-GRAVE</a></li>
             <li><a class="dropdown-item" href="bullyng.html">BULLYNG</a></li>
             <li><a class="dropdown-item" href="deterioro_cognitivo.html">DETERIORO-COGNITIVO</a></li>
             <li><a class="dropdown-item" href="auxilio_psicologico.html">AUXILIO-PSICOLOGICO</a></li>
           </ul>
         </li>
         </li>
         <li class="nav-item">
           <li class="nav-item dropdown">
             <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
             PRODUCCION
             </a>
             <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdownMenuLink">
               <li><a class="dropdown-item" href="reporte_40.html">REPORTE 40</a></li>
               <li><a class="dropdown-item" href="produccion.html">PRODUCCION</a></li>
             </ul>
           </li>
         </li>
         <li class="nav-item">
           <li class="nav-item dropdown">
             <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
             OTROS
             </a>
             <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdownMenuLink">
               <li><a class="dropdown-item" href="seguimiento.html">SEGUIMIENTO</a></li>
               <li><a class="dropdown-item" href="gestantes.html">GESTANTES</a></li>
               <li><a class="dropdown-item" href="pcc.html">PCC</a></li>
               <li><a class="dropdown-item" href="acogidas.html">ACOGIDAS</a></li>
               <li><a class="dropdown-item" href="evais.html">EVAIS</a></li>
               <li><a class="dropdown-item" href="asistente_social.html">ASISTENTE SOCIAL</a></li>
             </ul>
           </li>
         </li>
       </ul>
     </div>
   </div>
 </nav>

</head>
<body>
  <div id="preloader">
    <div class="spinner"></div>
    <div class="image-container">
      <img src="CSS/preloader.png" alt="Imagen del preloader">
    </div>
  </div>

  <div class="container">
    <h1 align="center">DATOS-CSMC-VIRGEN-ASUNTA</h1>
    <br />
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="search1">AÃ‘O:</label>
          <input type="text" name="search1" id="search1" class="form-control">
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="search2">MES:</label>
          <input type="text" name="search2" id="search2" class="form-control">
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="search3">DIA:</label>
          <input type="text" name="search3" id="search3" class="form-control">
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="search4">CODIGO:</label>
          <input type="text" name="search4" id="search4" class="form-control">
        </div>
      </div>
    </div>
    <br />
    <div align="center">
      <button type="button" name="load_data" id="load_data" class="btn btn-outline-info btn-lg">CARGAR DATA</button>
     <!--<button id="record_count_label" type="button" class="btn btn-primary btn-lg" style="float: right;"></button>-->
     <button id="record_count_label" type="button" class="btn btn-success btn-lg" style="float: right;"></button>
     <!--<label id="record_count_label"></label>-->
    </div>
  </div>

    <br />
    <div class="table-responsive">
      <div class="container-fluid" id="employee_table">
      </div>
    </div>
  <script>
    $(document).ready(function(){
$('#load_data').click(function(){
 $.ajax({
   url:"CSV/BULLYNG.csv",
   dataType:"text",
   success:function(data)
   {
     var employee_data = data.split(/\r?\n|\r/);
     var record_count = employee_data.length - 1;
     var table_data = '<table class="table table-light table-bordered border-dark">';
     for(var count = 0; count<employee_data.length; count++)
     {
       var cell_data = employee_data[count].split(",");
       table_data += '<tr>';
       for(var cell_count=0; cell_count<cell_data.length; cell_count++)
       {
         if(count === 0)
         {
           table_data += '<th>'+cell_data[cell_count]+'</th>';
         }
         else
         {
           table_data += '<td>'+cell_data[cell_count]+'</td>';
         }
       }
       table_data += '</tr>';
     }
     table_data += '</table>';
     $('#employee_table').html(table_data);
     $('#record_count_label').text('TOTAL: ' + record_count);
   }
 });
});
});

      $('#search1, #search2, #search3, #search4').on('keyup change', function(){
       var search1 = $('#search1').val().toLowerCase();
       var search2 = $('#search2').val().toLowerCase();
       var search3 = $('#search3').val().toLowerCase();
       var search4 = $('#search4').val().toLowerCase();
       var filtered_rows = 0;// variable para contar filas filtradas
       $('table tbody tr').each(function(index){
         if(index === 0){ // skip first row (column headers)
           return;
         }

         var text1 = $(this).find('td').eq(1).text().toLowerCase();
         var text2 = $(this).find('td').eq(2).text().toLowerCase();
         var text3 = $(this).find('td').eq(3).text().toLowerCase();
         var text4 = $(this).find('td').eq(4).text().toLowerCase();
         var match1 = true;
         var match2 = true;
         var match3 = true;
         var match4 = true;  

         if(search1 !== ''){
           match1 = match1 && text1.indexOf(search1) !== -1;
         }

         if(search2 !== ''){
           match2 = match2 && text2.indexOf(search2) !== -1;
         }
         
         if(search3 !== ''){
           match3 = match3 && text3.indexOf(search3) !== -1;
         }
         
         if(search4 !== ''){
           match4 = match4 && text4.indexOf(search4) !== -1;
         }

         if(match1 && match2 && match3 && match4){
           $(this).show();
           filtered_rows++;//MOSTRAR CONTADOR
         } else{
           $(this).hide();
         }
       });
       $('#record_count_label').text('REGISTROS: ' + filtered_rows);  
     });
 </script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
 <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
 <script>
   $(document).ready(function() {
     $('.dropdown-toggle').dropdown();
   });
 </script>

  <script src="CSS/preloader.js"></script>
</body>
</html>